import{_ as y,F as I,a as k,m as M,b as V,r,o as F,c as L,d as o,f as e,w as g,g as B,s as _,l as h,q as f,j as N,L as C,y as j,z as E}from"./index-f9d242ac.js";const T={components:{FrontNavbar:I,FullFooter:k},data(){return{user:{username:"",password:""},rememberMe:!1}},created(){this.checkRemember()},mounted(){this.checkLoginStatus()},computed:{...M(h,["isLoading","isLogin"])},watch:{rememberMe(){this.rememberMe?this.$swal.fire({title:"Are you sure remember it?",text:" Please verify and correct it if necessary!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, do it!"}).then(s=>{s.isConfirmed&&(this.$swal.fire("Remember!","Your password has been saved.","success"),localStorage.setItem("username",this.user.username),localStorage.setItem("password",this.user.password),localStorage.setItem("rememberMe",!0))}):(localStorage.removeItem("username"),localStorage.removeItem("password"),localStorage.removeItem("rememberMe"))}},methods:{...V(h,["checkLoginStatus"]),signIn(){const s="https://vue3-course-api.hexschool.io/admin/signin";this.$http.post(s,this.user).then(t=>{if(t.data.success){const{token:c,expired:d}=t.data;document.cookie=`JTownToken=${c}; expires=${new Date(d)}`,this.$router.go(-1),localStorage.setItem("username",JSON.stringify(this.user.username))}else this.$swal.fire("Incorrect","please check username or password.","warning")})},validatePassword(s){return s?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{10,}$/.test(s)?!0:"密碼需包含英文大小寫和數字，且超過十位數以上":!1},checkRemember(){localStorage.getItem("rememberMe")==="true"?(this.rememberMe=!0,this.user.username=localStorage.getItem("username"),this.user.password=localStorage.getItem("password")):localStorage.setItem("rememberMe","false")},confirmEvent(){localStorage.setItem("VIP",JSON.stringify("testToken")),localStorage.setItem("username",JSON.stringify(this.user.username)),this.$router.push("/dashboard/products")}}},i=s=>(j("data-v-a9245bb2"),s=s(),E(),s),q={class:"login_bg"},J={class:"d-flex justify-content-center align-items-center h-100"},P={class:"card"},R=i(()=>e("div",{class:"card-header"},[e("h3",null,"Login"),e("div",{class:"d-flex justify-content-end social_icon"},[e("span",null,[e("i",{class:"fab fa-google-plus-square"})])])],-1)),U={class:"card-body"},$={class:"input-group form-group mb-2 position-relative"},z=i(()=>e("div",{class:"input-group-prepend"},[e("i",{class:"fas fa-user"})],-1)),A={class:"input-group form-group mt-4"},D=i(()=>e("div",{class:"input-group-prepend"},[e("i",{class:"fas fa-key"})],-1)),O={class:"mt-2 d-flex gap-1 align-items-center justify-content-end me-2"},Y=i(()=>e("label",{for:"remember",class:"text-white"},"Remember Me",-1)),Z=i(()=>e("div",{class:"form-group text-center mt-5"},[e("input",{type:"submit",value:"Login",class:"btn float-right login_btn"})],-1)),G={class:"card-footer d-flex justify-content-center align-items-center"},H={class:"d-flex justify-content-center align-items-center links"};function K(s,t,c,d,a,m){const b=r("LoadingMask"),v=r("FrontNavbar"),u=r("FieldValidate"),p=r("ErrorMessage"),w=r("FormValidate"),S=r("el-button"),x=r("FullFooter");return F(),L("div",null,[o(b,{active:s.isLoading},null,8,["active"]),o(v,{"is-login":s.isLogin},null,8,["is-login"]),e("div",q,[e("div",J,[e("div",P,[R,e("div",U,[o(w,{onSubmit:B(m.signIn,["prevent"])},{default:g(({errors:l})=>[e("div",$,[z,o(u,{id:"email",type:"text",name:"email",class:f(["form-control rounded-3",{"is-invalid":l.email,"is-valid":!l.email&&!!a.user.username}]),placeholder:"請輸入 Email",rules:"email|required",autofocus:"",modelValue:a.user.username,"onUpdate:modelValue":t[0]||(t[0]=n=>a.user.username=n)},null,8,["class","modelValue"]),o(p,{name:"email",class:"invalid-feedback ms-5"})]),e("div",A,[D,o(u,{type:"password",name:"密碼",id:"password",class:f(["form-control rounded-3",{"is-invalid":l.密碼,"is-valid":!l.密碼&&!!a.user.password}]),placeholder:"password",required:"",modelValue:a.user.password,"onUpdate:modelValue":t[1]||(t[1]=n=>a.user.password=n),maxlength:"20",rules:m.validatePassword},null,8,["modelValue","rules","class"]),o(p,{name:"密碼",class:"invalid-feedback ms-5"})]),e("div",O,[N(e("input",{id:"remember",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=n=>a.rememberMe=n)},null,512),[[C,a.rememberMe]]),Y]),Z]),_:1},8,["onSubmit"])]),e("div",G,[e("div",H,[_(" Don't have an account? "),o(S,{style:{}},{default:g(()=>[_("Sign Up")]),_:1})])])])])]),o(x)])}const W=y(T,[["render",K],["__scopeId","data-v-a9245bb2"]]);export{W as default};
